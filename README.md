# RabbitHole Health Tracker

30ë¶„ ì£¼ê¸°ë¡œ ìŠ¤ë§ˆíŠ¸ ë§ì—ì„œ ê±´ê°• ë°ì´í„°ë¥¼ ìë™ ìˆ˜ì§‘í•˜ê³  APIë¡œ ì „ì†¡í•˜ëŠ” Flutter ì•±ì…ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“Š ë°±ê·¸ë¼ìš´ë“œ ê±´ê°• ëª¨ë‹ˆí„°ë§

- **30ë¶„ ì£¼ê¸° ìë™ ë°ì´í„° ìˆ˜ì§‘**: SR08 ë§ì—ì„œ ì‹¬ë°•ìˆ˜, í˜ˆì¤‘ì‚°ì†Œ, ê±¸ìŒìˆ˜ ìë™ ìˆ˜ì§‘
- **ìë™ ì¬ì—°ê²°**: ë§ ì—°ê²°ì´ ëŠì–´ì§„ ê²½ìš° ìµœëŒ€ 5íšŒ ìë™ ì¬ì—°ê²° ì‹œë„
- **ì‹¤ì‹œê°„ API ì „ì†¡**: ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ì„œë²„ë¡œ ì „ì†¡ (ìµœëŒ€ 3íšŒ ì¬ì‹œë„)
- **ë¡œì»¬ ë°±ì—…**: ì „ì†¡ ì‹¤íŒ¨ ì‹œ SQLiteì— ì•ˆì „í•˜ê²Œ ì €ì¥ í›„ ë‹¤ìŒ ê¸°íšŒì— ì¬ì „ì†¡

### ğŸ”„ API ë°ì´í„° í˜•íƒœ

ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜ì§‘ëœ ê±´ê°• ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ JSON í˜•íƒœë¡œ ì „ì†¡ë©ë‹ˆë‹¤:

```json
{
  "user_id": "ì‚¬ìš©ìID",
  "heart_rate": 78,
  "spo2": 97,
  "step_count": 1234,
  "body_temperature": 36.5,
  "blood_pressure": {
    "systolic": 120,
    "diastolic": 80
  },
  "blood_sugar": 98,
  "battery": 85,
  "charging_state": 1,
  "sleep_hours": 7.7,
  "sports_time": 1800,
  "screen_status": 1,
  "timestamp": "2025-01-17T10:00:00Z"
}
```

### ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

- **URL**: `{baseURL}/users/data`
- **Method**: POST
- **Headers**:
  - `Content-Type: application/json`
  - `Authorization: Bearer {accessToken}`

### ğŸ”§ ì¬ì‹œë„ ë¡œì§

- **ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜**: 3íšŒ
- **ì¬ì‹œë„ ì¡°ê±´**:
  - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
  - ì„œë²„ ì˜¤ë¥˜ (5xx)
  - ìš”ì²­ ì œí•œ ì˜¤ë¥˜ (429)
- **ë°±ì˜¤í”„ ì „ëµ**: ì§€ìˆ˜ì  ì¦ê°€ (2ì´ˆ, 4ì´ˆ, 6ì´ˆ)
- **í† í° ê°±ì‹ **: 401 ì˜¤ë¥˜ ì‹œ ìë™ ë¦¬í”„ë ˆì‹œ í† í°ìœ¼ë¡œ ê°±ì‹ 

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
SR08 Ring Device
      â†“
SR08HealthService (30ë¶„ íƒ€ì´ë¨¸)
      â†“
GET10/GET14/GET23 ìˆœì°¨ ì‹¤í–‰
      â†“
MainApplication (ë°ì´í„° ìˆ˜ì‹ )
      â†“
BackgroundHealthProvider (ë°ì´í„° ì²˜ë¦¬)
      â†“
LocalDbService (ë¡œì»¬ ì €ì¥) + ApiService (ì„œë²„ ì „ì†¡)
      â†“
Server API ({baseURL}/users/data)
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ ì‹œì‘

```dart
await platform.invokeMethod('startBackgroundService');
```

### 2. ì¦‰ì‹œ ë°ì´í„° ìˆ˜ì§‘ (í…ŒìŠ¤íŠ¸ìš©)

```dart
await platform.invokeMethod('requestBackgroundHealthData');
```

### 3. í…ŒìŠ¤íŠ¸ ë°ì´í„° ì „ì†¡

```dart
await ApiService.sendTestHealthData();
```

## ğŸ“± ì§€ì› í”Œë«í¼

- âœ… Android
- âŒ iOS (í–¥í›„ ì§€ì› ì˜ˆì •)

## ğŸ” ë³´ì•ˆ ê¸°ëŠ¥

- JWT ì•¡ì„¸ìŠ¤ í† í° ìë™ ê´€ë¦¬
- ë¦¬í”„ë ˆì‹œ í† í°ì„ í†µí•œ ìë™ í† í° ê°±ì‹ 
- ë¡œì»¬ ë°ì´í„° ì•”í˜¸í™” ì €ì¥

## ğŸ“‹ ë°ì´í„° í•„ë“œ ì„¤ëª…

| í•„ë“œ             | íƒ€ì…   | ì„¤ëª…                             | ê¸°ë³¸ê°’                       |
| ---------------- | ------ | -------------------------------- | ---------------------------- |
| user_id          | String | ì‚¬ìš©ì ê³ ìœ  ì‹ë³„ì               | ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ID           |
| heart_rate       | int    | ì‹¬ë°•ìˆ˜ (BPM)                     | ë§ì—ì„œ ì¸¡ì •ëœ ê°’             |
| spo2             | int    | í˜ˆì¤‘ì‚°ì†Œë†ë„ (%)                 | ë§ì—ì„œ ì¸¡ì •ëœ ê°’             |
| step_count       | int    | ê±¸ìŒìˆ˜                           | ë§ì—ì„œ ì¸¡ì •ëœ ê°’             |
| body_temperature | double | ì²´ì˜¨ (Â°C)                        | 36.5 (ê¸°ë³¸ê°’)                |
| blood_pressure   | Object | í˜ˆì••                             | systolic: 120, diastolic: 80 |
| blood_sugar      | int    | í˜ˆë‹¹ (mg/dL)                     | 98 (ê¸°ë³¸ê°’)                  |
| battery          | int    | ë°°í„°ë¦¬ ì”ëŸ‰ (%)                  | ë§ì—ì„œ ì¸¡ì •ëœ ê°’             |
| charging_state   | int    | ì¶©ì „ ìƒíƒœ (0: ë¯¸ì¶©ì „, 1: ì¶©ì „ì¤‘) | 0 (ê¸°ë³¸ê°’)                   |
| sleep_hours      | double | ìˆ˜ë©´ ì‹œê°„ (ì‹œê°„)                 | 0.0 (ê¸°ë³¸ê°’)                 |
| sports_time      | int    | ìš´ë™ ì‹œê°„ (ì´ˆ)                   | 0 (ê¸°ë³¸ê°’)                   |
| screen_status    | int    | í™”ë©´ ìƒíƒœ                        | 0 (ê¸°ë³¸ê°’)                   |
| timestamp        | String | ì¸¡ì • ì‹œê° (ISO 8601 UTC)         | ì¸¡ì • ë‹¹ì‹œ ì‹œê°               |

---

ğŸ¥ **Taean AI Health Center** - ìŠ¤ë§ˆíŠ¸ í—¬ìŠ¤ì¼€ì–´ ì†”ë£¨ì…˜
